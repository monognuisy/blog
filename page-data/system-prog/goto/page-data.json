{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/system-prog/goto/","result":{"data":{"site":{"siteMetadata":{"title":"monognuisy blog."}},"markdownRemark":{"id":"baa0637c-e96a-51ab-85ba-73f885e13f21","excerpt":"🤔 goto? 많은 C 입문 교재를 보면 goto를 마치 '절대로 쓰면 안되는 것' 이라던지, '한 번이라도 쓰면 큰일이 나는 것' 과 같이 취급한다.\n컴퓨터 과학에 지대한 영향을 끼친 에츠허르 다익스트라(Edsger W. Dijkstra…","html":"<h2>🤔 goto?</h2>\n<p>많은 C 입문 교재를 보면 goto를 마치 '절대로 쓰면 안되는 것' 이라던지, '한 번이라도 쓰면 큰일이 나는 것' 과 같이 취급한다.\n컴퓨터 과학에 지대한 영향을 끼친 에츠허르 다익스트라(Edsger W. Dijkstra) 옹께서 <code class=\"language-text\">goto</code>를 절대로 쓰지 말라고 한 것의 영향이\n크다고 생각한다.</p>\n<p>그렇다면, 왜 쓰지 말아야 할까?</p>\n<h3>🤦‍♂️ 굳이 쓸 필요가 없다!</h3>\n<p>다음 두 코드는 완벽히 동일하게 작동한다. 어느 것이 더 깔끔한가?</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">sumTo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> N<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        res <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">sumTo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> N<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">></span> N<span class=\"token punctuation\">)</span> <span class=\"token keyword\">goto</span> done<span class=\"token punctuation\">;</span>\n\nloop<span class=\"token operator\">:</span>\n    res <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span>\n    i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;=</span> N<span class=\"token punctuation\">)</span> <span class=\"token keyword\">goto</span> loop<span class=\"token punctuation\">;</span>\n\ndone<span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>당연히 위의 <code class=\"language-text\">for</code> 문이 더 간결하고 깔끔해 보인다. <code class=\"language-text\">goto</code>문을 쓴 코드는 마치 어셈블리어 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"nasm\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-nasm line-numbers\"><code class=\"language-nasm\">.sumTo\n    pushq   <span class=\"token operator\">%</span><span class=\"token register variable\">rbx</span>\n    movl    <span class=\"token number\">$0</span>, <span class=\"token operator\">%</span><span class=\"token register variable\">eax</span>\n    movl    <span class=\"token number\">$1</span>, <span class=\"token operator\">%</span><span class=\"token register variable\">ebx</span>\n    cmp     <span class=\"token operator\">%</span><span class=\"token register variable\">rdi</span>, <span class=\"token operator\">%</span><span class=\"token register variable\">rbx</span>\n    jg      .DONE\n.LOOP\n    addq    <span class=\"token operator\">%</span><span class=\"token register variable\">rbx</span>, <span class=\"token operator\">%</span><span class=\"token register variable\">rax</span>\n    addq    <span class=\"token number\">$1</span>, <span class=\"token operator\">%</span><span class=\"token register variable\">rbx</span>\n    cmp     <span class=\"token operator\">%</span><span class=\"token register variable\">rdi</span>, <span class=\"token operator\">%</span><span class=\"token register variable\">rbx</span>\n    jle     .LOOP\n.DONE\n    popq    <span class=\"token operator\">%</span><span class=\"token register variable\">rbx</span>\n    ret</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>(최대한 단순히 logic만 표현하였다.)</p>\n<p>이렇게, 굳이 어셈블리어로 쓰기 위한 것이 아닌 이상, goto 문은 대부분 <code class=\"language-text\">if</code>와 같은 조건문과 <code class=\"language-text\">while</code>, <code class=\"language-text\">for</code>과 같은 반복문으로 <strong>대체</strong>될 수 있다.</p>\n<h3>🤮 스파게티 코드?</h3>\n<p>또한, <code class=\"language-text\">goto</code>를 남용하면 흔히 말하는 <strong>스파게티 코드</strong>가 나올 수 있다. 만드는 법은 어렵지 않다. 다만, 해석하기 힘들 뿐.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> z <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">goto</span> L2<span class=\"token punctuation\">;</span>\n\nL1<span class=\"token operator\">:</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>x <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">goto</span> end<span class=\"token punctuation\">;</span>\n\nL3<span class=\"token operator\">:</span>\n    z <span class=\"token operator\">-=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">goto</span> L2<span class=\"token punctuation\">;</span>\n    y<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n\nL2<span class=\"token operator\">:</span>\n    x <span class=\"token operator\">+=</span> z<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>z <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">goto</span> L1<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">goto</span> L3<span class=\"token punctuation\">;</span>\n\nend<span class=\"token operator\">:</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d, %d, %d\\n\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>(이게 바로 예상이 된다면... <code class=\"language-text\">goto</code>를 마음껏 써도 좋다. 물론 혼자만.)</p>\n<p>이렇게 <code class=\"language-text\">goto</code>를 쓸데없이 남발하면, 보기도 싫고, 해석하기도 힘들고, 건들기는 더욱 두려운 코드가 만들어진다. <br>\n그럼, 정말로 <code class=\"language-text\">goto</code>는 '절대로 쓰면 안되는 것'일까?</p>\n<h3>👍 다중 반복문의 탈출</h3>\n<p>의외로, 좋은 사용처가 있다. 바로, <strong>다중 반복문</strong>(nested loop)의 탈출이다. <br>\n이를 위해 간단한 C-like pseudo code를 작성하면 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token comment\">// do something...</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> k <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// nested for문 전체를 break 해버리고 싶음!</span>\n            <span class=\"token keyword\">goto</span> out<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nout<span class=\"token operator\">:</span>\n<span class=\"token comment\">// nice break. do something...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>오히려 이런 경우에는 <code class=\"language-text\">goto</code>를 사용하지 않으면 복잡해진다. <code class=\"language-text\">goto</code>를 안쓰면 flag 변수를 만들어서 매번 검사하고 탈출해야 하는데,\n반복문이 깊어지면 깊어질수록, 이는 크게 비효율적일 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token comment\">// do something...</span>\n<span class=\"token keyword\">int</span> flag <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> k <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// nested for문 전체를 break 해버리고 싶음!</span>\n            flag <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 이 얼마나 비효율적인가!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>물론, flag 변수가 많이 사용되는 것은 비트마스킹을 통해 어느정도 해결할 수 있다. 그럼에도 불구하고, 저 <code class=\"language-text\">if</code>문은 어쩔 수 없다.</p>\n<p>따라서, 다중 반복문에서는 <code class=\"language-text\">goto</code>를 사용하는 것이 가독성이나 확장성 측면에서 좋다고 할 수 있다.</p>\n<h3>🙂 간단한 예외처리</h3>\n<p>예외처리에서도 <code class=\"language-text\">goto</code>는 많이 사용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token comment\">// in _cpu_down:</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>st<span class=\"token operator\">-></span>state <span class=\"token operator\">></span> CPUHP_TEARDOWN_CPU<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    st<span class=\"token operator\">-></span>target <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span>target<span class=\"token punctuation\">,</span> CPUHP_TEARDOWN_CPU<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ret <span class=\"token operator\">=</span> <span class=\"token function\">cpuhp_kick_ap_work</span><span class=\"token punctuation\">(</span>cpu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">goto</span> out<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>st<span class=\"token operator\">-></span>state <span class=\"token operator\">></span> CPUHP_TEARDOWN_CPU<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">goto</span> out<span class=\"token punctuation\">;</span>\n\n    st<span class=\"token operator\">-></span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nret <span class=\"token operator\">=</span> <span class=\"token function\">cpuhp_down_callbacks</span><span class=\"token punctuation\">(</span>cpu<span class=\"token punctuation\">,</span> st<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ret <span class=\"token operator\">&amp;&amp;</span> st<span class=\"token operator\">-></span>state <span class=\"token operator\">&lt;</span> prev_state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>st<span class=\"token operator\">-></span>state <span class=\"token operator\">==</span> CPUHP_TEARDOWN_CPU<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">cpuhp_reset_state</span><span class=\"token punctuation\">(</span>cpu<span class=\"token punctuation\">,</span> st<span class=\"token punctuation\">,</span> prev_state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">__cpuhp_kick_ap</span><span class=\"token punctuation\">(</span>st<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">WARN</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DEAD callback error for CPU%d\"</span><span class=\"token punctuation\">,</span> cpu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nout<span class=\"token operator\">:</span>\n    <span class=\"token function\">cpus_write_unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">lockup_detector_cleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">arch_smt_update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">cpu_up_down_serialize_trainwrecks</span><span class=\"token punctuation\">(</span>tasks_frozen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> ret<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href=\"https://github.com/torvalds/linux/blob/master/kernel/cpu.c\">https://github.com/torvalds/linux/blob/master/kernel/cpu.c</a></p>\n<p>이는 linux kernel의 cpu.c 코드에서 에러 처리를 위하여 <code class=\"language-text\">goto</code>를 사용한 모습이다. <br>\n오류를 발생하는 <code class=\"language-text\">ret</code> 변수는 <code class=\"language-text\">_cpu_down</code> 함수 내에서 할당되고, 처리된다.</p>\n<p>따라서, 어떠한 <strong>함수 내에서 예외를 처리할 수 있다면</strong>, <code class=\"language-text\">goto</code>문을 사용하는 것이 확실하고, 깔끔한 방법 중 하나라는 것을 확인할 수 있다.</p>\n<h3>😒 그러면 goto는 어디로든 점프할 수 있나요?</h3>\n<p><strong>아니다</strong>. 이것이 <code class=\"language-text\">goto</code>의 한계라고 할 수 있다. <code class=\"language-text\">goto</code>는 일반적으로 한 함수 안에서만 점프할 수 있다. 즉, 다음과 같은 코드는 컴파일 오류를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nL1<span class=\"token operator\">:</span>               <span class=\"token comment\">// useless</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">goto</span> L1<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 이 함수에는 L1이 없는데?</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 여러 함수를 옮겨다니기 위해서는 non-local jump인 <code class=\"language-text\">setjmp</code>와 <code class=\"language-text\">longjmp</code>를 사용해야만 한다.</p>\n<p>즉, <code class=\"language-text\">goto</code>로 예외를 처리하기 위해서는 꼭 그 함수 내에서 (다른 errorful한 함수를 호출하지 않고) 처리할 수 있을 정도로 단순한 예외여야 한다. <br>\n(물론 nonlocal jump를 쓰더라도 메모리 해제 등등 생각해야 할 것이 많다.)</p>\n<h3>결론 및 세줄요약</h3>\n<p><code class=\"language-text\">goto</code>는 마냥 나쁜것은 아니다. 대부분의 상황에서는 코드를 지저분하게 만들지만, 특정한 상황에서는 오히려 코드를 보기 좋게 만들 수 있다.\n따라서, 적재적소에 쓰면서 코드를 짤 필요가 있다.</p>\n<ol>\n<li>웬만해선 <code class=\"language-text\">goto</code>는 <code class=\"language-text\">if</code>나 <code class=\"language-text\">for</code>로 대체될 수 있다.</li>\n<li>다중 반복문이나 간단한 예외처리에서는 <code class=\"language-text\">goto</code>가 더 좋을수도?</li>\n<li>근데 non-local jump는 안됨.</li>\n</ol>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#-goto\">🤔 goto?</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-%EA%B5%B3%EC%9D%B4-%EC%93%B8-%ED%95%84%EC%9A%94%EA%B0%80-%EC%97%86%EB%8B%A4\">🤦‍♂️ 굳이 쓸 필요가 없다!</a></li>\n<li><a href=\"#-%EC%8A%A4%ED%8C%8C%EA%B2%8C%ED%8B%B0-%EC%BD%94%EB%93%9C\">🤮 스파게티 코드?</a></li>\n<li><a href=\"#-%EB%8B%A4%EC%A4%91-%EB%B0%98%EB%B3%B5%EB%AC%B8%EC%9D%98-%ED%83%88%EC%B6%9C\">👍 다중 반복문의 탈출</a></li>\n<li><a href=\"#-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC\">🙂 간단한 예외처리</a></li>\n<li><a href=\"#-%EA%B7%B8%EB%9F%AC%EB%A9%B4-goto%EB%8A%94-%EC%96%B4%EB%94%94%EB%A1%9C%EB%93%A0-%EC%A0%90%ED%94%84%ED%95%A0-%EC%88%98-%EC%9E%88%EB%82%98%EC%9A%94\">😒 그러면 goto는 어디로든 점프할 수 있나요?</a></li>\n<li><a href=\"#%EA%B2%B0%EB%A1%A0-%EB%B0%8F-%EC%84%B8%EC%A4%84%EC%9A%94%EC%95%BD\">결론 및 세줄요약</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"C에서의 goto","date":"December 11, 2022","description":"과연 정말로 쓰면 안되는 것일까?","tags":["System Programming","Programming"]}},"previous":{"fields":{"slug":"/ai/1/"},"frontmatter":{"title":"Differentiation w.r.t. Vector / Matrix"}},"next":{"fields":{"slug":"/system-prog/rlrule/"},"frontmatter":{"title":"Right-to-Left Rule과 typedef"}}},"pageContext":{"id":"baa0637c-e96a-51ab-85ba-73f885e13f21","previousPostId":"93bd4dbb-e769-5a8a-b249-45a8cc42a86b","nextPostId":"cd7bab91-e858-52fa-a9ce-b271b44bb618"}},"staticQueryHashes":["2841359383","3274528899"]}